# 数据库的基本概念



## 数据库的基本概念

1. 数据库的英文单词： DataBase 简称 ： DB

   

2. 什么数据库？

   * 用于存储和管理数据的仓库。

     

3. 数据库的特点：

   1. 持久化存储数据的。其实数据库就是一个文件系统
   2. 方便存储和管理数据
   3. 使用了统一的方式操作数据库 -- SQL

   

4. 常见的数据库软件
   	* 参见《MySQL基础.pdf》



## 安装&卸载&配置&使用

1. 安装
2. 卸载
   1. 去mysql的安装目录找到my.ini文件		复制 datadir="C:/ProgramData/MySQL/MySQL Server 5.5/Data/"
   2. 卸载MySQL
   3. 删除C:/ProgramData目录下的MySQL文件夹。
3. 配置
   1. MySQL服务启动
      1. 手动。
      2. cmd --> services.msc  打开服务器的窗口
      3. 使用管理员的开cmd
         1. net start mysql80	:	启动mysql的服务
         2. net stop mysql80   :    关闭mysql服务
   2. 登录MySQL
      1. mysql -u用户名 -p密码
      2. mysql -hip -uroot -p连接目标的密码
      3. mysql --host=ip地址 --user=root --password=连接目标的密码
   3. MySQL退出
      1. exit
      2. quit
   4. MySQL目录结构
      1. MySQL安装目录：basedir="安装地址/MySQL/"
         1. 配置文件是 my.ini
      2. MySQL数据目录：basedir="安装地址//MySQL Server 5.5/Data/"
      3. 几个概念：
         1. 数据库：文件夹
         2. 表：文件
         3. 数据：数据



## SQL

1. 什么是SQL？

   Structured Query Language：结构化查询语言

   其实就是定义了操作所有关系型数据库的规则。每一种数据库操作的方式存在不一样的地方，称为“方言”。

   

2. SQL通用语法

   1. SQL 语句可以单行或多行书写，以分号结尾。
   2. 可使用空格和缩进来增强语句的可读性。
   3. MySQL 数据库的 SQL 语句不区分大小写，关键字建议使用大写。
   4. 三种注释：
      1. 单行注释：-- 注释内容  [SQL通用] [注意--后必须加空格]
      2. 单行注释：# 注释内容  [MySQL特有]
      3. 多行注释：/* 注释内容 */

   

3. SQL分类

   ​	![SQL分类](D:\源代码\A2_JavaWeb学习js\B1_MySQL学习\src\Data01_安装配置基本概念\图解\SQL分类.bmp)

   1. DDL(Data Definition Language)数据定义语言

      ​		用来定义数据库对象：数据库，表，列等。关键字：create, drop,alter 等

   2. DML(Data Manipulation Language)数据操作语言

     ​		用来对数据库中表的数据进行增删改。关键字：insert, delete, update 等

   3. DQL(Data Query Language)数据查询语言

     ​		用来查询数据库中表的记录(数据)。关键字：select, where 等

   4. DCL(Data Control Language)数据控制语言(了解)

     ​		用来定义数据库的访问权限和安全级别，及创建用户。关键字：GRANT， REVOKE 等
   
   



## SQL四分类讲解

DDL:	操作数据库、表

DDL:	增删改表中的数据

DQL：查询表中的记录

DCL:	数据控制语言 [了解]

---

## DDL:	操作数据库、表

操作数据库：CRUD

1. C [ Create ] :   创建
2. R [ Retrieve ] : 查询
3. U [ Updata ] :  修改
4. D [ Delete ] :   删除
5. 使用数据库

----



#### 操作数据库

> ---


> ## C [ Create ] :   创建
> 
> 1. 创建数据库：
>    ```mysql
>    create database 数据库名称;
>    ```
> 
> 2. 创建数据库, 判断不纯在, 在创建：
> 
>    ```mysql
>    create database if not exists 数据库名称;
>    ```
> 
> 3. 创建数据库, 并且指定字符集：
> 
>    ```mysql
>    create database 数据库名称 character set 字符集名称;
>    ```
> 
> 4. 综合小练习：创建newgbk数据库, 判断是否存在, 指定gbk编码
> 
>    ```mysql
>    create database if not exists newgbk character gbk;
>    ```
> 
> 
> 
> ## R [ Retrieve ] : 查询
> 
> 1. 查询所有数据库的名称:
> 
>    ```mysql
>    show databases;
>    ```
> 
> 2. 查询某个数据库的字符集:查询某个数据库的创建语
> 
>    ```mysql
>    show create database 数据库名称;
>    ```
> 
> 
> 
> ## U [ Updata ] :  修改
> 
> 1. 修改数据库的字符集
> 
>    ```mysql
>    alter database 数据库名称 character set 字符集名称;
>    ```
> 
> 
> 
> ## D [ Delete ] :   删除
> 
> 1. 删除数据库
> 
>     ```mysql
>     drop database 数据库名称;
>     ```
> 
> 2. 判断数据库存在，存在再删除
> 
>    ```mysql
>    drop database if exists 数据库名称;
>    ```
> 
> 
> 
> ## 使用数据库
> 
> 1. 查询当前正在使用的数据库名称
> 
>    ```mysql
>    select databese();		#要带括号 
>    ```

> 2. 使用数据库
> 
>    ```mysql
>    use 数据库名称;
>    ```
> 
>    
> 
---

---

---



#### 操作表

> ---

> ## C [ Create ] :   创建
>
> 1. 语法
>
>    ```mysql
>    create table 表名(
>    	列名1 数据类型1, #用逗号隔开
>        列名2 数据类型2(...),
>        ..... i
>        列名n 数据类型n  #最后一个不带逗号
>    );	#最后别忘了分号结束语句
>    ```
>    
> 2. 数据库类型：
>
>    |   类型    | 类型                                                         |
>    | :-------: | ------------------------------------------------------------ |
>    |    int    | 整数类型                                                     |
>    |  double   | 小数类型                                                     |
>    |  varchar  | 字符串  varchar(字符长度限制)                                |
>    |   date    | 日期  包含年月日：yyyy-MM-dd                                 |
>    | datetime  | 日期  包含年月日时分秒：yyyy-MM-dd HH:mm:ss                  |
>    | timestamp | 日期  包含年月日时分秒：yyyy-MM-dd HH:mm:ss <br />特点：如果将来不给这个字段赋值，或赋值为null，则默认使用当前的系统时间，来自动赋值 |
>    |  .......  | 还有一些不常见的类型, 一般不会用到                           |
>
> 3. 案例 - 创建一个表
>
>    ```mysql
>    create table 数据类型( #创建一个表,格式: create table 表名称(  ... );
>        字符串 varchar(10), #创建列名称和数据类型：表名称 数据类型 , ...
>        整形 int,     #多个列用 , 隔开
>        小数类型1 double, #double()
>        小数类型2 double(5,2), #设置范围,最大值时99999.99
>        日期1 date,       #日期 只包含年月日 yyyy-MM-dd
>        日期2 datetime,   #日期 包含年月日时分秒,yyyy-MM-dd HH:mm:ss
>        日期3 timestamp,  #日期 获取当前系统日期时间
>        布尔值 boolean,
>        还有一些不常用的 text,
>        end int      #最后一个列不用 , 号，否则会报错
>    );               #最后别忘了括号外面也有一个分号用于结束该整条语句。
>    ```
>
> 4. 另外的：copy到新表
>
>    ```mysql
>    create table 新表名 like 被复制的表名
>    ```
>
>    
>
> ---
>
> ## R [ Retrieve ] : 查询
>
> 1. 查询某个数据库中所有的表名称
>
>    ```mysql
>    show tables;
>    ```
>
> 2. 查询表结构
>
>    ```mysql
>    desc 表名称;
>    ```
>
> 
>
> ---
>
> ## U [ Updata ] :  修改
>
> 1. 修改表名
>
>    ```mysql
>    alter table 表名 rename to 新表名;
>    ```
>
> 2. 修改表的字符集
>
>    ```mysql
>    alter table 表名 character set gbk;
>    ```
>
> 3. 添加一列
>
>    ```mysql
>    alter table 表名 add 新表名 新数据类型;
>    ```
>
> 4. 修改列名称、数据类型
>
>    ```mysql
>    alter table 表名 change 列名 新类名 新数据类型;
>    ```
>
>    ```mysql
>    alter table 表名 modify 列名 新数据类型;
>    ```
>
> 5. 删除列
>
>    ```mysql
>    alter table 表名 drop 列名;
>    ```
>
> 
>
> ---
>
> ## D [ Delete ] :   删除
>
> 1. 删除一张表
>
>    ```mysql
>    drop table 表名;
>    ```
>
> 2. 先判断是否存在，诺存在，再删除
>
>    ```mysql
>    drop table if not exists 表名;
>    ```
>
>    ---
>
> ---





## DDL:	增删改表中的数据

> ----
>
> ## 添加数据
>
> 1. 语法：添加新行
>
>    ```mysql
>    insert into 表名(列名1,列名2,...,列名n) values(值1,值2,...,值n);
>    ```
>
> 2. 简化：当添加的行中的列名全部赋值
>
>    ```mysql
>    insert into 表名 values(值1,值2,...,值n);
>    ```
>
> 3. 注意：
>
>    ```mysql
>    # 1: 列名和值 一一对应
>    # 2: 如果表名后,不定义列名,使用2简化过程,要全部赋值
>    # 3: 除了数字类型,其他类型要用引号 [单双引都可以]
>    ```
>
> 
> 
>
> ----
>
> ## 删除数据
>
> 1. 语法：删除某行或某特定值
>
>    ```mysql
>    delete from 表名 [where 条件];
>    delete from stu where name = 'GanGa';
>    ```
>
> 2. 删除全部行
>
>    ```mysql
>    # 第一种方法
>    delete from 表名; #删除该表的所有行
>                                     
>    # 第二种方法
>    truncate table 表名; #先删除这个表,然后再生成一个和之前一样的新表。
>                                     
>    # 推选使用第二种方法,效率更高。
>
> 
> 
>
> ---
>
> ## 修改数据
>
> 1. 语法：修改特定条件的 某列某值
>
>    ```mysql
>    update 表名 set 列名1=值1, 列名2=值2, ...[where 条件];
>    ```
>
> 2. 修改次列全部的值
>
>    ```mysql
>    update 表名 set 列名1=值1, 列名2=值2, ...;
>    ```
>
>    
>    
>
> ----



## DQL：查询表中的记录

>----
>
>1. ## 语法：
>
>```mysql
>select 
>	字段列表
>from
>	表名列表
>where
>	条件列表
>group by
>	分组字段
>having
>	分组之后的条件
>order by
>	排序
>limit
>	分页限定
>
>
>```
>
>2. ## 基础查询
>
>1. 多个字段的查询
>
>
>```mysql
>select 字段名1,字段名2,... from 表名;
>select * from 表名; #查询所有有字段列表
>```
>
>
>
> 2. 去除重复
>
>    ```mys
>    select distinct 字段名... from 表名;
>    ```
>
>
>
> 3. 计算列
>
>    ```mysql
>    #一般可以使用四则运算技计算一些列的值[一般用于数值计算]
>    #注意: 任何数据运算时,如有有null,结果就为null
>    #使: ifnull(表达式一, 表达式二)
>    #		表达式一: 要判断为null的字段
>    #		表达式二: 为null要替换后的值
>    
>    select
>    	name, -- 姓名
>    	math, -- 数学
>    	nglish, -- 英语
>    	ifnull(math,0)+ifnull(english,0) #总分
>    	from
>    student; -- 学生表
>    
>    ```
>
>
>
> 4.  起别名:
>
>    ```mysql
>    # 字段 as 别名	【或者】	字段 别名
>    
>    select
>    	name as 姓名, -- 姓名
>    	math as 数学, -- 数学
>    	english 英语, -- 英语  可以省略as
>    	ifnull(math,0) +ifnull(english,0) as 总分 -- 总分
>    from
>    	student; -- 学生表
>    
>    ```
>
>---
>
>3. ## 条件查询
>
>1. where子句根条件
>
>2. 运算符
>
>   ```mysql
>    > 、< 、<= 、>= 、= 、<>
>   
>   between ... and
>   
>   in(集合体)
>   
>   like #模糊查询
>   _ # 占位符 单个任意字符
>   % # 占位符 多个任意字符
>   
>   is null
>   
>   and &&
>   or ||
>   not !
>   
>   ```
>
>---
>
>---
>
>3. 演示: 
>
>   ```mysql
>   # 查询年龄大于20岁
>   select * from student where age > 20;
>   # 查询年龄大于等于20岁的
>   select * from student where age >= 20;
>   # 查询年龄不等于20岁的
>   select * from student where age != 20;
>   select * from student where age <> 20;
>   # 查询年龄大于等于20 小于等于30
>   select * from student where age >= 20 && age <= 30;
>   select * from student where age >= 20 and age <= 30;
>   # 使用between ... and ...语句
>   select * from student where age between 20 and 30;
>   # 查询年龄为22岁、18岁、25岁的信息
>   select * from student where age = 22 or age = 18 or age = 25;
>   select * from student where age = 22 || age = 18 || age = 25;
>   # 使用 in()函数
>   select * from student where age in(22,18,25);
>   # 查询英语成绩为null的
>   #select * from student where english = null; #错误语法 null不参与运算和比较、
>   # 使用 is null 语句
>   select * from student where english is null;
>   # 查询英语不为null的
>   select * from student where english is not null;
>   # ==========
>   # 查询姓马的
>   select * from student where name like '马%';
>   # 查询姓马的 且 姓名是两个字的
>   select * from student where name like '马_';
>   # 查询姓马的 且 姓名是三个字的
>   select * from student where name like '马__';
>   # 查询姓名第二个字为 化 的
>   select * from student where name like '_化%';
>   # 查询姓名中含 德 字的
>   select * from student where name like '%德%';
>   # 查询姓名为三字的
>   select * from student where name like '___';
>   ```
>
>---
>
>---
>
>4. ## 排序查询
>
>语法规则
>
>```mysql
>order by 子句
>
>asc  #升序排列 默认就是升序排列 可省略
>desc #降序排列
>
>#多条排序条件
>order by 
>	排序字段1 排序方式1, #先排序方式1
>	排序字段2 排序方式2, #如果1相同 再按方式2
>	......	#以此类推
>
>```
>
>---
>
>---
>
>5. ## 聚合函数：
>
>   1. 概念
>
>      ```mysql
>      # 将一列数据作为一个整体，进行纵向的计算。
>      ```
>
>      
>
>   2. 语法
>
>      ```mysql
>      max #计算最大值
>      min #计算最小值
>      sum #计算值总和
>      avg #计算平均数
>      count #计算个数
>      #count一般选择非空列： 主键
>      #count(*)
>      ```
>
>      
>
>   3. 演示
>
>      ```mysql
>      #聚合函数
>      
>      # count()
>      # 计算表中所有行的个数
>      select count(name) from student;   # 8
>      select count(english) from student;# 7
>      #count计算的都是非null的个数 因为english中有一个为null所以不进行计算
>      
>      # 需求1: 班级有多少人 // 需要排除null
>      # 方式一 使用ifnull(函数) // 不推选
>      select count(ifnull(english,0)) as 人数 from student;
>      # 方式二 选择非空的列 // 以后学 //推选
>      
>      # 需求2: 班级中考了英语的人数
>      select count(english) as 考了英语的人数 from student;
>      
>      select max(math) as 数学最大分数 from student;
>      select min(id) as 第一个学号 from student;
>      select sum(math) as 数学总分 from student;
>      select avg(math) as 数学平均分 from student;
>      select avg(english) as 英语平均分 from student; #同样不进行计算null
>      select avg(ifnull(english,0)) as 英语平均分 from student;
>      select count(id) 人数, avg(math) 数学平均分 from student; #不止可以使用一个聚合函数
>      ```
>
>      
>
>---
>
>---
>
>6. ## 分组查询
>
>   1. 语法
>
>
>   ```mysql
>   group by 分组字段;
>   ```
>
>   2. 演示与注意：
>
>   ```mysql
>   /*注意:
>   	1.分组之后查询的字段: 分组字段、聚合函数
>   	2.where 和 having 的区别: 
>   		1.where在分组之前进行限定，如果不满足条件，则不参与分组。
>   			having在分组之后进行限定，如果不满足结果，则不会被查询出来。【重点】
>   		2.where后不可以跟聚合函数，having可以进行聚合函数判断。【重点】
>   	3.使用别名代替 having后面的聚合函数
>   */
>   
>   #====================================================
>   
>   # 演示:
>   # 分组查询
>   
>   # 按照性别分组。分别查询男、女同学的平均分
>   select sex , avg(math) from student group by sex;
>   # 1.分组之后查询的字段: 分组字段、聚合函数
>   # 就算跟了也没事 但是毫无意义
>   select name, sex, avg(math) from student group by sex; # 无意义
>   
>   select sex, avg(math), count(id) from student group by sex;
>   
>   # 同上面条件 外加条件: 如果分数低于70分 在不进行参与计算
>   # 在group by 分组之前 加一个where进行判断
>   select sex, avg(math), count(id) from student where math >= 70 group by sex;
>   select sex, avg(math), count(id) from student group by sex;
>   
>   # 附加条件：对结果集进行判断 大于2人的才保留分组
>   # 在group by 分组之后 使用 having + 聚合函数
>   select
>          sex,       -- 分组字段
>          avg(math), -- 求取平均分
>          count(id)  -- 分组总人数
>   from
>        student      -- 学生表
>   where
>         math >= 70  -- 分组判断
>   group by
>            sex      -- 分组列名
>   having count(id) > 2;#分组要求
>   
>   # 改进
>   select
>          sex as 性别,
>          avg(math) as 数学平均分,
>          count(id) as 总人数
>   from
>        student
>   where
>         math >= 70
>   group by
>            sex
>   having #使用别名代替聚合函数 进行判断
>          总人数>2;
>   ```
>   ---
>
>  7. ## 分页查询
>
>     1. 语法
>
>          ```mysql
>          limit 开始的索引, 每页查询的条数;
>          ```
>
>     2. 公式
>
>          ```mysql
>          # 开始的索引 = (当前索引 - 1) * 煤业显示的条数 
>          ```
>
>     3. 演示
>
>          ```mysql
>          select * from student limit 0, 3; -- 第一页, 1 2 3行信息
>          select * from student limit 4, 3; -- 第二页, 4 5 6行信息
>          select * from student limit 6, 3; -- 第三页, 7 8 行的信息 // 9行无内容
>          ```
>
>     4. 注意
>
>          ```mysql
>          1.limit 是一个MySQL的"方言"
>          2.其他数据库有z
>          ```
>
>          
>
>
>
>---
>
>



## DCL:	数据控制语言 [了解]







---

---





## 约束

