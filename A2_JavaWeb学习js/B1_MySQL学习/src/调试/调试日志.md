
```mysql
show databases ;

-- create database testSQL; -- 创建一个数据库 会自动变成小写的

show create database testSQL;
-- 输出结果:
-- CREATE DATABASE `testSQL`
-- /*!40100 DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci */
-- /*!80016 DEFAULT ENCRYPTION='N' */

create database if not exists testSQL;#创建时，判断以下是否已经存在了
create database if not exists newSQL; #if not exists 数据库名  如果不存在就创建

create database if not exists newGBK character set GBK; #创建一个GBK编码的字符集数据库
show create database newGBK;
/*
输出结果:
CREATE DATABASE `newGBK`
!40100 DEFAULT CHARACTER SET gbk
!80016 DEFAULT ENCRYPTION='N'
*/

# create database if not exists newSQL character UTF8;
alter database newSQL character set GBK;
show create database newSQL;
# CREATE DATABASE `newSQL`
# /*!40100 DEFAULT CHARACTER SET gbk */
# /*!80016 DEFAULT ENCRYPTION='N' */

drop database testSQL; #删除数据库
drop database if exists testSQL;

select database(); #查看当前使用的数据库
use newGBK;        #使用newGBK这个数据库
select database();

/*几个关键字：

创建关键字：create
查询关键字：show
修改关键字：alter
删除关键字：drop
使用数据库：select use
                         */

#===================================================================================
#DDL

use mysql;
select database();
show tables ; #查看mysql数据库中的所有表
desc servers; #查看servers的表结构
/*查询servers的表结构
Server_name,char(64),NO,PRI,"",""
Host,char(255),NO,"","",""
Db,char(64),NO,"","",""
Username,char(64),NO,"","",""
Password,char(64),NO,"","",""
Port,int,NO,"",0,""
Socket,char(64),NO,"","",""
Wrapper,char(64),NO,"","",""
Owner,char(64),NO,"","",""
                                */


create database if not exists testSQL character set utf8;
use testSQL;
show tables;

create table 数据类型( #创建一个表,格式: create table 表名称(  ... );
    字符串 varchar(10), #创建列名称和数据类型：表名称 数据类型 , ...
    整形 int,     #多个列用 , 隔开
    小数类型1 double, #double()
    小数类型2 double(5,2), #设置范围,最大值时99999.99
    日期1 date,       #日期 只包含年月日 yyyy-MM-dd
    日期2 datetime,   #日期 包含年月日时分秒,yyyy-MM-dd HH:mm:ss
    日期3 timestamp,  #日期 获取当前系统日期时间
    布尔值 boolean,
    还有一些不常用的 text,
    end int      #最后一个列不用 , 号，否则会报错
);               #最后别忘了括号外面也有一个分号用于结束该整条语句。

# 案例: 创建一个Student表结构：
create table if not exists student(
    uid int,
    name varchar(32),
    age int,
    score double(4,1),
    birth_date date,
    Up_data timestamp
);

desc student; # 查询表

# 先复制一下student表, 创建一个新的students表
create table students like student;


create table stu like student;
# 删除stu表
drop table if exists stu;


## 修改表
alter table stu rename newName;  #修改表名
alter table newName character set gbk; #修改表的字符集为gbk
show create table newname; #验证查询是否为gbk
alter table newname add newStr varchar(32); #添加一个新的列newStr列 数据类型是 varchar

alter table newname change uid newUid varchar(6); #修改表中的某个列名 同时修改这个列的数据类型
alter table newname modify newUid int; #只修改这个列的 数据类对象 不修改名称。

alter table newname drop newStr; #删除表中的列


#=============================================================================================
#DML

use testSQL;
show tables;
desc student;

insert into student(uid,name,age) values(20201,'Gan',17); #给部分列数据赋值，前后要一一对应
insert into student values(20202,'Ga',18,99.9,null,null); #简化 给所有列名赋值，一个也不能少
insert into student(uid,name,age,birth_date) values(20203,'Jiang',9,"1111-11-11");
# 除了数字以外, 其他类型如varchar、date等其他类型要用 引号 括起来,[单引号 双引号都可以]。

select * from student;# 查询这个表。=======================================

# 删除
delete from student where name = 'Ga'; #删除特定值的 某行
delete from student; #如果没有where判断条件 则会删除所有行。 但是不推选使用这种方式删除
truncate table student; #先删除这个表, 然后再生成一个和这个表一样的新表。 推选使用, 效率更高

#修改
update student set score = 100, age = 8 where name = 'Jiang'; #修改name为Jiang的score和age值
update student set Up_data = '2021-11-11';  # 如果不加where判断, 者修改表中的所有此列名的值。


# ========================================================================================
#DQL

drop table student;
CREATE TABLE student (
                id int, -- 编号
                name varchar(20), -- 姓名
                age int, -- 年龄
                sex varchar(5), -- 性别
                address varchar(100), -- 地址
                math int, -- 数学
                english int -- 英语
);
INSERT INTO student(id,NAME,age,sex,address,math,english)
                VALUES
                (1,'马云',55,'男','杭州',66,78),
                (2,'马化腾',45,'女','深圳',98,87),
                (3,'马景涛',55,'男','香港',56,77),
                (4,'柳岩',20,'女','湖南',76,65),
                (5,'柳青',20,'男','湖南',86,NULL),
                (6,'刘德华',57,'男','香港',99,99),
                (7,'马德',22,'女','香港',99,99),
                (8,'德玛西亚',18,'男','南京',56,65 );

select name from student; #查看所有字段的表

select name, math, english, math+english from student;
select name, math, english, ifnull(math,0) + ifnull(english,0) from student;
select
       name as 姓名, -- 姓名
       math as 数学, -- 数学
       english 英语, -- 英语
       ifnull(math,0) + ifnull(english,0) as 总分 -- 总分
from
     student; -- 学生表


## =======================

# 查询年龄大于20岁
select * from student where age > 20;
# 查询年龄大于等于20岁的
select * from student where age >= 20;

# 查询年龄不等于20岁的
select * from student where age != 20;
select * from student where age <> 20;

# 查询年龄大于等于20 小于等于30
select * from student where age >= 20 && age <= 30;
select * from student where age >= 20 and age <= 30;
# 使用between ... and ...语句
select * from student where age between 20 and 30;

# 查询年龄为22岁、18岁、25岁的信息
select * from student where age = 22 or age = 18 or age = 25;
select * from student where age = 22 || age = 18 || age = 25;
# 使用 in()函数
select * from student where age in(22,18,25);

# 查询英语成绩为null的
#select * from student where english = null; #错误语法 null不参与运算和比较、
# 使用 is null 语句
select * from student where english is null;
# 查询英语不为null的
select * from student where english is not null;

# ==========
# 查询姓马的
select * from student where name like '马%';
# 查询姓马的 且 姓名是两个字的
select * from student where name like '马_';
# 查询姓马的 且 姓名是三个字的
select * from student where name like '马__';
# 查询姓名第二个字为 化 的
select * from student where name like '_化%';
# 查询姓名中含 德 字的
select * from student where name like '%德%';
# 查询姓名为三字的
select * from student where name like '___';

#=================
# 排序查询
select * from student order by math; #排序方法 默认是ASC 升序。
select * from student order by math asc;
select * from student order by math desc; #desc 降序排列

#按照数学成绩排名, 如果数学成绩一样, 则按照英语成绩排序
select * from student order by math asc, english asc;


#==================
#聚合函数

# count()
# 计算表中所有行的个数
select count(name) from student;   # 8
select count(english) from student;# 7
#count计算的都是非null的个数 因为english中有一个为null所以不进行计算

# 需求1: 班级有多少人 // 需要排除null
# 方式一 使用ifnull(函数) // 不推选
select count(ifnull(english,0)) as 人数 from student;
# 方式二 选择非空的列 // 以后学 //推选

# 需求2: 班级中考了英语的人数
select count(english) as 考了英语的人数 from student;

select max(math) as 数学最大分数 from student;
select min(id) as 第一个学号 from student;
select sum(math) as 数学总分 from student;
select avg(math) as 数学平均分 from student;
select avg(english) as 英语平均分 from student; #同样不进行计算null
select avg(ifnull(english,0)) as 英语平均分 from student;
select count(id) 人数, avg(math) 数学平均分 from student; #不止可以使用一个聚合函数

# =================
# 分组查询

# 按照性别分组。分别查询男、女同学的平均分
select sex , avg(math) from student group by sex;
# 1.分组之后查询的字段: 分组字段、聚合函数
# 就算跟了也没事 但是毫无意义
select name, sex, avg(math) from student group by sex; # 无意义

select sex, avg(math), count(id) from student group by sex;

# 同上面条件 外加条件: 如果分数低于70分 在不进行参与计算
# 在group by 分组之前 加一个where进行判断
select sex, avg(math), count(id) from student where math >= 70 group by sex;
select sex, avg(math), count(id) from student group by sex;

# 附加条件：对结果集进行判断 大于2人的才保留分组
# 在group by 分组之后 使用 having + 聚合函数
select
       sex,       -- 分组字段
       avg(math), -- 求取平均分
       count(id)  -- 分组总人数
from
     student      -- 学生表
where
      math >= 70  -- 分组判断
group by
         sex      -- 分组列名
having count(id) > 2;#分组要求

# 改进
select
       sex as 性别,
       avg(math) as 数学平均分,
       count(id) as 总人数
from
     student
where
      math >= 70
group by
         sex
having #使用别名代替聚合函数 进行判断
       总人数>2;


#========================
# 分组查询

# 每页显示3调记录
select * from student limit 0, 3; -- 第一页, 1 2 3行信息
select * from student limit 4, 3; -- 第二页, 4 5 6行信息
select * from student limit 6, 3; -- 第三页, 7 8 行的信息

# 公式: 开始的索引 = (当前页码 - 1) * 每页显示的条数











```

ALTER USER 'root'@'localhost' IDENTIFIED BY 'password' PASSWORD EXPIRE NEVER; #修改加密规则
ALTER USER 'root'@'localhost' IDENTIFIED WITH mysql_native_password BY 'ganga';  #更新一下用户的密码
FLUSH PRIVILEGES; #刷新权限
